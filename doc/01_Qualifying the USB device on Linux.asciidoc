= 01_Qualifying the USB device on Linux

[#01_QualifyingtheUSBdeviceonLinux.xhtml]##

[[01_QualifyingtheUSBdeviceonLinux.xhtml#h.cgqywbl05ue]]
== [.c15]#Qualifying the USB device on Linux.#

[.c0]# This section presents how to qualify an USB device on Linux, more
specifically the DNAfx_git device. It will give us useful information we
will commonly use all along this project. +
I guess it may also be a good USB mini tutorial for whoever wants to
understand or integrate a USB device, whatever it could be. #

[.c0]##

[.c0]#You will not need to be root in this section.#

[.c0]#First of all, plug the DNAfx_git and have a first look at your usb
devices through lsusb.#

[.c0]##

[#01_QualifyingtheUSBdeviceonLinux.xhtml#t.c9d727e25ffb8306f5f22d2f28115e436031fc31]##
[#01_QualifyingtheUSBdeviceonLinux.xhtml#t.0]##

[width="100%",cols="100%",]
|===
a|
[.c13]#[bgillet@izabel ~]%# [.c5]# lsusb#

[.c5]#Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub#

[.c5]#Bus 001 Device 008: ID 138a:0090 Validity Sensors, Inc. VFS7500
Touch Fingerprint Sensor#

[.c5]#Bus 001 Device 006: ID 04f2:b596 Chicony Electronics Co., Ltd
Integrated Camera#

[.c18]#Bus 001 Device 018: ID 0483:5703 STMicroelectronics HB100#

[.c5]#Bus 001 Device 004: ID 1050:0010 Yubico.com Yubikey (v1 or v2)#

[.c5]#Bus 001 Device 007: ID 046d:0825 Logitech, Inc. Webcam C270#

[.c5]#Bus 001 Device 005: ID 046d:c534 Logitech, Inc. Unifying Receiver#

[.c5]#Bus 001 Device 003: ID 05e3:0608 Genesys Logic, Inc. Hub#

[.c5]#Bus 001 Device 014: ID 04e8:6860 Samsung Electronics Co., Ltd
Galaxy series, misc. (MTP mode)#

[.c5]#Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub#

[.c5]##

[.c5]##

|===

[.c0]##

[.c0]#Here we see the device is on Bus 001, registered as Device 018,
and had a vendor:product id of 0483:5703.#

[.c0]#This id will never change for this product, but in case you try
another device (ie. the pro device) here is how to find it so to adapt
it.#

[.c0]##

[.c0]# Also, a device file will be created/removed as it is
plugged/unplugged. +
It’s number may vary depending on the USB devices usage on a same
platform. #

[.c0]##

[.c0]#To identify the current device file used, just plug / unplug it
and list the /dev to find which device file is created for it.#

[.c0]##

[.c0]# To qualify the device and the way it is declared on USB, run the
following command. +
(For the example, we have identified current device as /dev/hidraw5) #

[.c0]##

[#01_QualifyingtheUSBdeviceonLinux.xhtml#t.403a5536dc055f38df4c225c41c219faf3951182]##
[#01_QualifyingtheUSBdeviceonLinux.xhtml#t.1]##

[width="100%",cols="100%",]
|===
a|
[.c13]#[bgillet@izabel ~]%# [.c5]# udevadm info -a -n /dev/hidraw5#

[.c5]#…/…#

[.c3]#looking at parent device
'/devices/pci0000:00/0000:00:14.0/usb2/2-1':#

[.c3]#        KERNELS=="2-1"#

[.c14]#        # [.c9]#SUBSYSTEMS=="usb"#

[.c3]#        DRIVERS=="usb"#

[.c3]#        ATTRS\{authorized}=="1"#

[.c3]#        ATTRS\{avoid_reset_quirk}=="0"#

[.c3]#        ATTRS\{bConfigurationValue}=="1"#

[.c3]#        ATTRS\{bDeviceClass}=="00"#

[.c3]#        ATTRS\{bDeviceProtocol}=="00"#

[.c3]#        ATTRS\{bDeviceSubClass}=="00"#

[.c3]#        ATTRS\{bMaxPacketSize0}=="64"#

[.c3]#        ATTRS\{bMaxPower}=="100mA"#

[.c3]#        ATTRS\{bNumConfigurations}=="1"#

[.c3]#        ATTRS\{bNumInterfaces}==" 1"#

[.c3]#        ATTRS\{bcdDevice}=="00c8"#

[.c3]#        ATTRS\{bmAttributes}=="c0"#

[.c3]#        ATTRS\{busnum}=="2"#

[.c3]#        ATTRS\{configuration}==""#

[.c3]#        ATTRS\{devnum}=="7"#

[.c3]#        ATTRS\{devpath}=="1"#

[.c9]#        ATTRS\{idProduct}=="5703"#

[.c9]#        ATTRS\{idVendor}=="0483"#

[.c3]#        ATTRS\{ltm_capable}=="no"#

[.c9]#        ATTRS\{manufacturer}=="STMicroelectronics"#

[.c3]#        ATTRS\{maxchild}=="0"#

[.c3]#        ATTRS\{physical_location/dock}=="no"#

[.c3]#        ATTRS\{physical_location/horizontal_position}=="center"#

[.c3]#        ATTRS\{physical_location/lid}=="no"#

[.c3]#        ATTRS\{physical_location/panel}=="right"#

[.c3]#        ATTRS\{physical_location/vertical_position}=="lower"#

[.c3]#        ATTRS\{power/active_duration}=="1510739"#

[.c3]#        ATTRS\{power/autosuspend}=="2"#

[.c3]#        ATTRS\{power/autosuspend_delay_ms}=="2000"#

[.c3]#        ATTRS\{power/connected_duration}=="1510739"#

[.c3]#        ATTRS\{power/control}=="on"#

[.c3]#        ATTRS\{power/level}=="on"#

[.c3]#        ATTRS\{power/persist}=="1"#

[.c3]#        ATTRS\{power/runtime_active_time}=="1510498"#

[.c3]#        ATTRS\{power/runtime_status}=="active"#

[.c3]#        ATTRS\{power/runtime_suspended_time}=="0"#

[.c9]#        ATTRS\{product}=="HB100"#

[.c3]#        ATTRS\{quirks}=="0x0"#

[.c3]#        ATTRS\{removable}=="removable"#

[.c3]#        ATTRS\{remove}=="(not readable)"#

[.c3]#        ATTRS\{rx_lanes}=="1"#

[.c3]#        ATTRS\{serial}=="00000000001A"#

[.c3]#        ATTRS\{speed}=="12"#

[.c3]#        ATTRS\{tx_lanes}=="1"#

[.c3]#        ATTRS\{urbnum}=="17"#

[.c3]#        ATTRS\{version}==" 2.00"#

[.c3]#…/…#

|===

[.c0]##

[.c0]#Several parent devices exist, find the one which contains idVendor
and idProduct with respectively 0483 and 6703 as identified though
lsusb.#

[.c0]##

[.c0]#Key information here are things like SUBSYSTEMS that lsusb -v does
not provide, but not only. Those will be useful all along in this
document.#

[.c0]##
